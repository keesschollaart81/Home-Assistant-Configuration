- id: 'DoorbellNotification'
  alias: Doorbell Notification
  trigger:
  - platform: state
    entity_id: binary_sensor.doorbell_button
    to: 'on'
  action: 
   - service: camera.snapshot
     data:
        entity_id: camera.front_door
        filename: "/config/www/camera_snapshots/front_door_{{ now ().year }}_{{ now ().month }}_{{ now ().day }}_{{ now ().hour }}_{{ now ().minute }}.jpg"
   - service: notify.pushbullet
     data_template:
        title: "Er wordt aan de deur gebeld"
        message: "Beter ga je ff lopen te kijken!"
        data:
          # url: "https://schollaartthuis.duckdns.org:8123/local/camera_snapshots/front_door_{{ now ().year }}_{{ now ().month }}_{{ now ().day }}_{{ now ().hour }}_{{ now ().minute }}.jpg"
          file_url: "https://schollaartthuis.duckdns.org:8123/local/camera_snapshots/front_door_{{ now ().year }}_{{ now ().month }}_{{ now ().day }}_{{ now ().hour }}_{{ now ().minute }}.jpg"
          image_url: "https://schollaartthuis.duckdns.org:8123/local/camera_snapshots/front_door_{{ now ().year }}_{{ now ().month }}_{{ now ().day }}_{{ now ().hour }}_{{ now ().minute }}.jpg"
          file_type: "image/jpeg"
          type: "file"
  #  - service: notify.pushbullet
  #    data_template:
  #       title: "Er wordt aan de deur gebeld"
  #       message: "Beter ga je ff lopen te kijken!"
  #       data:
  #         url: "https://schollaartthuis.duckdns.org:8123{{ states.camera.front_door.attributes.entity_picture }}"
  #         file_url: "https://schollaartthuis.duckdns.org:8123{{ states.camera.front_door.attributes.entity_picture }}"
  #         image_url: "https://schollaartthuis.duckdns.org:8123{{ states.camera.front_door.attributes.entity_picture }}"
  #         file_type: "image/jpeg"
  #         type: "file"
  #  - service: notify.html5
  #    data_template:
  #       title: "Er wordt aan de deur gebeld"
  #       message: "Beter ga je ff lopen te kijken!"
  #       data:
  #         tag: "doorbell"
  #         url: "https://schollaartthuis.duckdns.org:8123{{ states.camera.front_door.attributes.entity_picture }}"
  #         image: "https://schollaartthuis.duckdns.org:8123{{ states.camera.front_door.attributes.entity_picture }}"
  #  - service: notify.ios_marleen_marleen01
  #    data_template:
  #       title: "Er wordt aan de deur gebeld"
  #       message: "Beter ga je ff lopen te kijken!"
  #       data:
  #         url: "https://schollaartthuis.duckdns.org:8123{{ states.camera.front_door.attributes.entity_picture }}"
  #         attachment:
  #           - url: "https://schollaartthuis.duckdns.org:8123{{ states.camera.front_door.attributes.entity_picture }}"
  #             content-type: jpg
   - service: script.sonos_say
     data:
        sonos_entity: media_player.woonkamer
        volume: 0.5
        message: 'Er wordt aan de deur gebeld'
        delay: '00:00:05'

- id: 'DoorbellSoundSilendAtNight'
  trigger:
  - platform: time
    at: '18:30:00'
  action:
    service: homeassistant.turn_off
    entity_id: switch.doorbell_buzzer_enabled

- id: 'DoorbellSoundBackToNormall'
  trigger:
  - platform: time
    at: '07:00:00'
  action: 
    service: homeassistant.turn_on
    entity_id: switch.doorbell_buzzer_enabled
  