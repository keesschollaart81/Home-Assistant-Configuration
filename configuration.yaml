homeassistant:
  name: Thuis
  latitude: !secret thuis_latitude
  longitude: !secret thuis_longitude
  elevation: 0
  unit_system: metric
  time_zone: Europe/Amsterdam
  customize: !include customize.yaml
  packages: !include_dir_named packages
  auth_providers:
    - type: homeassistant
    #- type: legacy_api_password
  whitelist_external_dirs:
    - /share/motion/

switch: !include switches.yaml
light: !include lights.yaml
sensor: !include sensors.yaml
binary_sensor: !include binary_sensors.yaml
# group: !include groups.yaml
automation: !include_dir_merge_list automations
scene: !include scene.yaml
input_boolean: !include input_booleans.yaml
script: !include script.yaml
history: !include history.yaml
system_health:
frontend:
config:
ios:
sonos:
auth:
custom_updater:

tts:
  - platform: google_translate
    language: 'nl'

http:
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem
  # api_password: !secret http_password
  base_url: schollaartthuis.duckdns.org:8123
    
lovelace:
  mode: yaml

updater:
  include_used_components: true

discovery:

# conversation:

history_graph:

recorder:
  db_url: !secret recorder_db_url
  purge_interval: 2
  purge_keep_days: 5

logbook:

timer:
  zigbee_permit_join:
    name: Time remaining
    duration: 600 # Updated this to the number of seconds you wish
  hallway_lights_off_in:
    duration: '00:02:00'
  hallway_1st_floor_lights_off_in:
    duration: '00:02:00'
  toilet_lights_off_in:
    duration: '00:03:00'
    
logger:
  default: warn
  logs:
    homeassistant.components.mqtt: info 
    homeassistant.components.shell_command: debug 
    homeassistant.components.google_assistant: debug 

map:

sun:

camera:
  - platform: ffmpeg
    name: Dafang
    input: -rtsp_transport tcp -i rtsp://192.168.2.11:8554/unicast
  - name: Locations
    platform: generic
    still_image_url: !secret google_maps_url
    limit_refetch_to_url_change: true
  - platform: local_file
    name: front_door_latest
    file_path: "/config/www/front-door/front-door-latest-small.gif"
  - platform: local_file
    name: backyard_latest
    file_path: "/config/www/backyard/backyard-latest-small.gif"

# stream:
    
google_translate:
  - platform: google
    language: 'nl'
  - platform: microsoft
    api_key: !secret cogntive_services_api_key
    language: en-us
    gender: Female
    type: JessaRUS
    rate: 20
    volume: -50
    pitch: high
    contour: (0, 0) (100, 100)

weather:
  - platform: buienradar
    name: 'rotterdam'
    forecast: True

cloud:

panel_iframe:
  configurator:
    title: Configurator
    icon: mdi:wrench
    url: https://schollaartthuis.duckdns.org:8123/hassio/ingress/core_configurator
  esphomeyaml:
    title: Esphomeyaml
    icon: mdi:code-not-equal-variant
    url: http://schollaartthuis.duckdns.org:6052/

toon:
    client_id: !secret toon_key
    client_secret: !secret toon_secret

mqtt:
    broker: core-mosquitto
    username: hassio
    password: !secret mqtt
    discovery: true
    discovery_prefix: homeassistant
    birth_message:
      topic: 'hass/status'
      payload: 'online'
    will_message:
      topic: 'hass/status'
      payload: 'offline'


device_tracker:
  - platform: owntracks
    max_gps_accuracy: 200 
  # - platform: experiaboxv8
  #   host: 192.168.2.254
  #   username: Admin
  #   password: !secret experiabox
  #   new_device_defaults:
  #     track_new_devices: false

person:
  - name: Kees
    id: kees
    user_id: a2ad052935f64c5baa9acdba3fab0271 
    device_trackers:
      - device_tracker.kees_kees01
  - name: Marleen
    id: marleen
    user_id: 57d490d252ab4d8f846f64a41b53f979 
    device_trackers:
      - device_tracker.marleen_marleen01

zone:
  - name: Thuis
    latitude: !secret thuis_latitude
    longitude:  !secret thuis_longitude
    radius: 100
    icon: mdi:account-multiple
    
  - name: School
    latitude: !secret school_latitude
    longitude: !secret school_longitude
    radius: 100
    icon: mdi:school
    
notify:
  - name: pushbullet
    platform: pushbullet
    api_key: !secret pushbullet_api_key
  - name: html5
    platform: html5
    gcm_api_key: !secret gcm_server_key
    gcm_sender_id: !secret gcm_sender_id

google_assistant:
  project_id: home-assistant-72f48
  api_key: !secret google_assistant_key
  expose_by_default: false
  exposed_domains:
    - switch
    - light
    - climate
  entity_config:
    light.0x90fd9ffffe2b5781_light:
      name: Toilet
      expose: true
      aliases:
        - wc  
        - w.c.  
    light.hall_light:
      name: Hal
      expose: true
      aliases:
        - Hal beneden  
    light.attic:
      name: Zolder 
    light.bank:
      name: Bank
      expose: true
      aliases:
        - Raam  
    light.hallway_1st_floor_light:
      name: Hal boven
      expose: true
      aliases:
        - Hal eerste verdieping
        - Hal eerste etage  
    light.kitchen_light:
      name: Keuken 
      expose: true
    light.lampentafel:
      name: Tafel
      expose: true
      aliases:
        - Eettafel
    light.staandelamp:
      name: Staande lamp
      expose: true
      aliases:
        - Staand
        - Hoek van de kamer  
    scene.eating:
      name: eten
      expose: true
      aliases:
        - etenstijd  
    scene.evening:
      name: savonds
      expose: true
      aliases:
        - avonds  
        - avond 
    climate.toon_thermostat:
      name: Toon
      expose: true
    switch.doorbell_buzzer_enabled:
      name: Deurbel
      expose: true
      aliases:
        - Deurbel geluid
    switch.licht_in_tuin:
      name: Tuin
      expose: true
      aliases:
        - Achtertuin
        - Buiten
 
rest_command:
  reboot_dafang:
    url: !secret dafang_rebooturl 
    username:  !secret dafang_username
    password: !secret dafang_password

proximity:
  thuis:
    devices:
      - device_tracker.kees_kees01
    tolerance: 50
    unit_of_measurement: km

zigbee2mqtt_networkmap: 

shell_command:
  install_imagemagick: 'apk add --update imagemagick'
  front_door_gif:  bash '/config/shell_commands/front-door.sh' {{ states.camera.front_door_camera.attributes.entity_picture }}
  backyard_gif: bash '/config/shell_commands/backyard.sh' {{ states.sensor.dafang_password.state }}
  delete_old_snapshots: find /backup/* -mtime +90 -exec rm {} \;