homeassistant:
  name: Thuis
  latitude: !secret thuis_latitude
  longitude: !secret thuis_longitude
  elevation: 0
  unit_system: metric
  time_zone: Europe/Amsterdam
  customize: !include customize.yaml

frontend:

config:

ios:

http:
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem
  api_password: !secret http_password

updater:
  include_used_components: true

discovery:

conversation:

history:

logbook:

logger:
  default: warn
  logs:
    homeassistant.components.mqtt: info

map:

sun:

camera:
  - platform: ffmpeg
    name: Dafang
    input: -rtsp_transport tcp -i rtsp://192.168.2.11:8554/unicast
 
sensor:
  - platform: yr
  - platform: google_travel_time
    name: Kees naar huis
    api_key: !secret google_api_key
    origin: device_tracker.kees_kees01
    destination: zone.home
    options:
      mode: driving
  - platform: postnl
    name: PostNl
    username: !secret postnl_username
    password: !secret postnl_password  
  - platform: template
    sensors:
      wasmachine:
        friendly_name: "Wasmachine"
        value_template: '{{ states.switch.plug_158d0001fa64a8.attributes.load_power|int }}'
        unit_of_measurement: 'Watt'
  - platform: systemmonitor
    resources:
      - type: disk_use_percent
        arg: /
      - type: memory_free
      - type: processor_use
  - platform: mqtt
    name: Schuurdeur
    state_topic: "motion/door"
  - platform: mqtt
    name: Poortdeur
    state_topic: "motion/gate"
  - platform: mqtt
    name: FietsJasmijn
    state_topic: "motion/bike/jasmijn"
  - platform: mqtt
    name: FietsMarleen
    state_topic: "motion/bike/marleen"
  - platform: mqtt
    name: Doorbell
    state_topic: "home/doorbell/doorbell"

tts:
  - platform: google

weather:
  - platform: buienradar

cloud:

group: !include groups.yaml
automation: !include_dir_merge_list automations
scene: !include scene.yaml
input_boolean: !include input_booleans.yaml

panel_iframe:
  configurator:
    title: Configurator
    icon: mdi:wrench
    url: http://hassio.local:3218

toon:
    username: !secret toon_username
    password: !secret toon_password
    consumer_key: !secret toon_key
    consumer_secret: !secret toon_secret

mqtt:
    broker: core-mosquitto
    username: hassio
    password: !secret mqtt
    discovery: true
    discovery_prefix: homeassistant
  
device_tracker:
  - platform: owntracks
    max_gps_accuracy: 200 
  - platform: experiaboxv8
    host: 192.168.2.254
    username: Admin
    password: !secret experiabox
    track_new_devices: no
      
xiaomi_aqara:
  discovery_retry: 5
  gateways:
    - key: !secret xiaomi_aqara_key
    
light:
  - platform: xiaomi_miio
    name: staandelamp
    host: 192.168.2.4
    token: !secret staandelamp_token
  - platform: xiaomi_miio
    name: bank
    host: 192.168.2.6
    token: !secret bank_token
  - platform: xiaomi_miio
    name: tafel1
    host: 192.168.2.7
    token: !secret tafel1_token
  - platform: xiaomi_miio
    name: tafel2
    host: 192.168.2.5
    token: !secret tafel2_token
  - platform: xiaomi_miio
    name: tafel3
    host: 192.168.2.3
    token: !secret tafel3_token
  - platform: group
    name: LampenTafel
    entities:
      - light.tafel1
      - light.tafel2
      - light.tafel3 
  - platform: mqtt
    name: keukenlamp
    state_topic: "stat/keukenlamp/POWER"
    command_topic: "cmnd/keukenlamp/POWER"
    availability_topic: "tele/keukenlamp/LWT"
    qos: 1
    payload_on: "ON"
    payload_off: "OFF"
    payload_available: "Online"
    payload_not_available: "Offline"
    retain: true
  - platform: group
    name: Livingroom
    entities:
      - light.staandelamp
      - light.bank
      - light.LampenTafel
      - light.keukenlamp

switch:
  - platform: xiaomi_miio
    name: Licht in tuin
    host: 192.168.2.9
    token:  !secret xiaomi_plug_tuin
    model: chuangmi.plug.v2
  - platform: mqtt
    name: "Doorbell Sound"
    state_topic: "home/doorbell/sound"
    command_topic: "home/doorbell/sound"
    payload_on: "1"
    payload_off: "0"
    optimistic: false
    qos: 0
    retain: true

zone:
  - name: Thuis
    latitude: !secret thuis_latitude
    longitude:  !secret thuis_longitude
    radius: 100
    icon: mdi:account-multiple
    
  - name: School
    latitude: !secret school_latitude
    longitude: !secret school_longitude
    radius: 100
    icon: mdi:school
    
notify:
  - name: pushbullet
    platform: pushbullet
    api_key: !secret pushbullet_api_key
  # - name: eventgrid
  #   platform: azure_event_grid
  #   host: !secret eventgrid_host
  #   topic key: !secret eventgrid_key

azure_event_grid:
  - host: !secret eventgrid_host
    topic key: !secret eventgrid_key

alexa:
  smart_home:
    filter:
      include_domains:
        - light
        - climate
        - scene
      exclude_entities:
        - light.gateway_light_7811dcb27b0d
        - light.tafel1
        - light.tafel2
        - light.tafel3
        - scene.false
    entity_config:
      climate.toon_van_eneco:
        name: Toon
      scene.Evening:
        name: Evening
      scene.Eating:
        name: Eating
      light.LampenTafel:
        name: Table
      light.keukenlamp:
        name: Kitchen
       
rest_command:
  reboot_dafang:
    url: !secret dafang_rebooturl 
    username:  !secret dafang_username
    password: !secret dafang_password


